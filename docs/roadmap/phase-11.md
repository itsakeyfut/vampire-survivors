# Phase 11: UI/HUD実装

## フェーズ概要

**ステータス**: 🔲 未着手
**推定工数**: 6-8時間
**依存関係**: Phase 6

### 目的
ゲームの全画面のUIを設計書通りに実装する。HUD・タイトル・ゲームオーバー・勝利画面・レベルアップカードをBevyのUIシステムで構築する。

---

## タスクリスト

### タスク 11.1: ゲームプレイHUD

**優先度**: P0
**推定工数**: 2時間
**ラベル**: task, phase-11, ui

**説明**:
ゲームプレイ中のHUD（HP・XP・タイマー・レベル・武器アイコン・撃破数）を実装する。

**受け入れ基準**:
- [ ] 上部左にHPバー（色変化あり: 緑→黄→赤）と数値が表示される
- [ ] 上部中央にMM:SS形式のタイマーが表示される
- [ ] 上部右にXPバーと現在レベルが表示される
- [ ] 下部に武器スロット6つのアイコン表示がある
- [ ] 下部右に撃破数が表示される
- [ ] HUD要素が毎フレーム正しく更新される

**実装ガイド**:
```rust
/// HUD の更新システム（PlayerStats・GameData を参照）
pub fn update_hud(
    player_query: Query<&PlayerStats, With<Player>>,
    game_data: Res<GameData>,
    mut hp_bar_query: Query<&mut Style, With<HpBarFill>>,
    mut timer_text: Query<&mut Text, With<TimerText>>,
    // ... その他のUIマーカー
) {
    // HPバーの幅を更新
    // タイマーテキストを更新（MM:SS形式）
    // XPバーの幅を更新
    // 武器アイコンのクールダウンオーバーレイ更新
}
```

---

### タスク 11.2: タイトル画面の完成

**優先度**: P1
**推定工数**: 1時間
**ラベル**: task, phase-11, ui

**説明**:
タイトル画面にゲームタイトル・スタートボタン・ゴールドショップボタン・所持ゴールド表示を実装する。

**受け入れ基準**:
- [ ] ゲームタイトルが画面中央上部に表示される
- [ ] 「ゲームスタート」ボタンがクリックでキャラクター選択へ遷移
- [ ] 「ゴールドショップ」ボタンがクリックでメタショップへ遷移
- [ ] 所持ゴールドが表示される
- [ ] ボタンのホバーエフェクトがある

---

### タスク 11.3: レベルアップ選択UIの完成

**優先度**: P0
**推定工数**: 1.5時間
**ラベル**: task, phase-11, ui

**説明**:
Phase 6で作成した基本的なレベルアップ選択UIを、設計書のカードデザイン通りに完成させる。

**受け入れ基準**:
- [ ] オーバーレイが暗い背景でゲーム画面を覆う
- [ ] 「LEVEL UP! Lv.X」テキストが表示される
- [ ] カードが3枚（ラック高いと4枚）表示される
- [ ] 各カードにアイコン・名前・アクション・効果説明が表示される
- [ ] カードのホバーエフェクトがある
- [ ] カードクリックで選択・ゲーム再開

---

### タスク 11.4: ポーズ画面

**優先度**: P1
**推定工数**: 0.5時間
**ラベル**: task, phase-11, ui

**説明**:
ESCキーでポーズし、「ゲームに戻る」「タイトルへ」ボタンを表示する。

**受け入れ基準**:
- [ ] ESCキーで `Paused` 状態に遷移
- [ ] 「PAUSED」テキストと2つのボタンが表示される
- [ ] 「ゲームに戻る」でゲームが再開する
- [ ] 「タイトルへ」でタイトルに戻る（確認なし）

---

### タスク 11.5: ゲームオーバー画面の完成

**優先度**: P0
**推定工数**: 0.5時間
**ラベル**: task, phase-11, ui

**説明**:
ゲームオーバー画面にプレイ統計を表示し、リトライ・タイトル戻りボタンを実装する。

**受け入れ基準**:
- [ ] 「GAME OVER」テキストが表示される
- [ ] 生存時間・撃破数・レベル・獲得ゴールドが表示される
- [ ] 「もう一度プレイ」でキャラクター選択に戻る
- [ ] 「タイトルへ」でタイトルに戻る

---

### タスク 11.6: 勝利画面の完成

**優先度**: P0
**推定工数**: 0.5時間
**ラベル**: task, phase-11, ui

**説明**:
勝利画面に「YOU WIN!」とプレイ統計、タイトルボタンを表示する。

**受け入れ基準**:
- [ ] 「YOU WIN!」テキストが表示される
- [ ] クリアタイム・撃破数・獲得ゴールドが表示される
- [ ] 「タイトルへ」ボタンが機能する

---

### タスク 11.7: UIスタイルの統一

**優先度**: P2
**推定工数**: 0.5時間
**ラベル**: task, phase-11, ui

**説明**:
設計書のカラーパレット・フォントサイズに合わせてUIスタイルを統一する。

**受け入れ基準**:
- [ ] 設計書のカラーパレットが適用されている
- [ ] フォントサイズが設計書通り
- [ ] ボタンのホバー・アクティブ状態のスタイルが統一されている

---

## フェーズ検証

### 検証項目
- [ ] 全画面のUIが表示され機能する
- [ ] HPバーとXPバーが正しく更新される
- [ ] タイマーが正しくMM:SS形式で表示される
- [ ] ゲームオーバー画面に正しい統計が表示される
- [ ] レベルアップカードが正しく選択できる

## 次のフェーズ

Phase 11 完了 → 次は **Phase 12: キャラクター選択** または **Phase 13: 宝箱システム** に進む
