# Vampire Survivors クローン - ゲーム仕様書

## 1. ゲーム概要

### 1.1 プロジェクト概要
本プロジェクトは、Bevyゲームエンジンを使用して「Vampire Survivors」スタイルのサバイバルアクションゲームのクローンを作成する学習プロジェクトです。ECSアーキテクチャを活用した大量エンティティ処理・自動攻撃システム・メタ進行システムの実装を通じて、ゲーム開発の知見を得ることを目的としています。

### 1.2 ゲームジャンル
- **ジャンル**: サバイバルアクション、ローグライト
- **視点**: 2Dトップダウン（真上から見た視点）
- **プレイ人数**: 1人
- **難易度**: シンプルな操作、奥深い戦略性（武器選択・進化）

### 1.3 ゲームの目的
プレイヤーは無限に湧き出す敵の群れの中を移動し、自動攻撃で敵を倒しながら30分間生存することを目指します。敵を倒すと経験値ジェムが出現し、レベルアップすることで武器やパッシブアイテムを強化できます。30分後に出現するボスを撃破することが最終目標です。

---

## 2. 基本ルール

### 2.1 コアゲームループ

```
移動（WASD/矢印キー）
    ↓
敵を自動攻撃で撃破
    ↓
経験値ジェム（XPジェム）を吸収
    ↓
レベルアップ → 武器/パッシブを3択で選択・強化
    ↓
より強力な武器で更に多くの敵を撃破
    ↓
（30分後）ボス出現 → 撃破 → 勝利
```

### 2.2 ゲームオーバー条件
- **プレイヤーのHPが0になった場合**、即座にゲームオーバー
- ゲームオーバー時、獲得したゴールドはメタ進行に引き継ぎ可能

### 2.3 勝利条件
- **30分間生存後に出現するボスを撃破**することで勝利
- 勝利時もゴールドはメタ進行に引き継ぎ可能
- 武器を最大レベルまで進化させた実績も解放される（将来実装）

### 2.4 時間による難易度変化
- 時間経過とともに敵の出現数・HPが増加する
- 特定の時間帯（5分・10分・15分・20分・25分）に強化された敵の波が来る
- 30分でボス「デス」が出現し、通常の敵スポーンが停止する

---

## 3. キャラクター仕様

### 3.1 初期キャラクター（MVP）

| パラメータ | 値 |
|-----------|-----|
| 最大HP | 100 |
| 移動速度 | 200 px/s |
| 攻撃力倍率 | 1.0x |
| ラック | 1.0x |
| 初期武器 | ムチ (Whip) |

### 3.2 追加キャラクター（メタ進行で解放）

| キャラクター名 | 解放条件 | 初期武器 | 特徴 |
|------------|---------|--------|------|
| マジシャン | 500G | マジックワンド | クールダウン-10% |
| シーフ | 700G | ナイフ | 移動速度+10%、初期弾速+10% |
| ナイト | 1000G | クロス | 最大HP+30% |

### 3.3 キャラクター選択画面
- タイトル画面からゲーム開始時にキャラクター選択画面を表示
- 未解放のキャラクターはロックアイコンで表示
- 各キャラクターのステータス・初期武器・特徴を確認可能

---

## 4. 武器システム

### 4.1 武器一覧（8種）

| 武器名 | 攻撃タイプ | 初期ダメージ | 初期クールダウン | 説明 |
|--------|---------|------------|--------------|------|
| ムチ (Whip) | 扇形スイング | 10 | 1.0s | 左右交互に扇形範囲攻撃 |
| マジックワンド (Magic Wand) | 追尾弾 | 20 | 0.5s | 最も近い敵に弾を発射 |
| ナイフ (Knife) | 貫通弾 | 15 | 0.3s | 移動方向に高速で貫通 |
| ガーリック (Garlic) | 継続オーラ | 5/tick | 0.5s | プレイヤー周囲に継続ダメージ |
| 聖書 (Bible) | 周回体 | 25 | 周回速度 | プレイヤーの周りを周回し接触ダメージ |
| 稲妻の指輪 (Thunder Ring) | 雷撃 | 40 | 2.0s | ランダムな敵に雷撃を落とす |
| クロス (Cross) | ブーメラン | 30 | 1.5s | 前方に投擲し戻ってくる |
| ファイアウォンド (Fire Wand) | 火球 | 50 | 3.0s | 最大HPの敵に大型火球を発射 |

### 4.2 武器レベルアップ効果

各武器はレベル1〜8まで強化可能。レベルアップ時の主な強化内容：

| 武器 | Lv2 | Lv4 | Lv6 | Lv8（最大） |
|------|-----|-----|-----|----------|
| ムチ | 範囲+10% | ダメージ+5 | クールダウン-20% | 弾数+1 |
| マジックワンド | 弾数+1 | ダメージ+10 | 貫通+1 | クールダウン-30% |
| ナイフ | 弾速+20% | 弾数+1 | ダメージ+5 | 貫通+2 |
| ガーリック | 範囲+15% | ダメージ+3 | 範囲+20% | ダメージ+5 |
| 聖書 | 周回数+1 | 周回速度+20% | ダメージ+10 | 周回数+1 |
| 稲妻の指輪 | 雷撃数+1 | ダメージ+20 | 雷撃数+1 | クールダウン-30% |
| クロス | ダメージ+10 | 弾数+1 | 範囲+20% | ダメージ+20 |
| ファイアウォンド | ダメージ+20 | 弾速+30% | 爆発範囲+20% | ダメージ+30 |

### 4.3 武器進化システム
武器が最大レベル（Lv8）に達し、対応するパッシブアイテムを所持している場合、宝箱を開けた際に進化可能になる。

| 基本武器 | 必要パッシブ | 進化後武器 | 進化後の特徴 |
|---------|------------|---------|------------|
| ムチ | ホローハート | ブラッディティア | 範囲2倍・HP吸収効果付与 |
| マジックワンド | エンプティトーム | ホーリーワンド | 全方向発射・貫通無限 |
| ナイフ | ブレイサー | サウザンドエッジ | 弾数大幅増・画面全体カバー |
| ガーリック | ポマローラ | ソウルイーター | ダメージ3倍・HP回復効果 |
| 聖書 | スペルバインダー | アンホーリーベスパーズ | 周回速度2倍・範囲拡大 |
| 稲妻の指輪 | デュプリケーター | ライトニングリング | 全敵同時攻撃・連鎖雷撃 |

---

## 5. パッシブアイテム

### 5.1 パッシブアイテム一覧（8種）

| アイテム名 | 効果（Lv1） | 効果（最大Lv） | 武器進化用途 |
|---------|-----------|------------|-----------|
| スピナッチ (Spinach) | 攻撃力+10% | 攻撃力+50% | - |
| ウィング (Wings) | 移動速度+10% | 移動速度+50% | - |
| ホローハート (Hollow Heart) | 最大HP+20% | 最大HP+100% | ムチ進化 |
| クローバー (Clover) | ラック+10% | ラック+50% | - |
| エンプティトーム (Empty Tome) | クールダウン-8% | クールダウン-40% | マジックワンド進化 |
| ブレイサー (Bracer) | 弾速+10% | 弾速+50% | ナイフ進化 |
| スペルバインダー (Spellbinder) | 武器持続+10% | 武器持続+50% | 聖書進化 |
| デュプリケーター (Duplicator) | 発射数+1 | 発射数+3 | 稲妻の指輪進化 |
| ポマローラ (Pummarola) | HP再生+0.5/s | HP再生+3.0/s | ガーリック進化 |

### 5.2 パッシブアイテムのレベルアップ
- 各パッシブアイテムはLv1〜5まで強化可能
- 同じアイテムをレベルアップ選択肢で選ぶと強化される
- 最大レベルに達したアイテムは選択肢から除外される

---

## 6. 敵システム

### 6.1 敵一覧（7種 + ボス）

| 敵名 | HP | 速度 | ダメージ | 出現開始時刻 | 特徴 |
|------|-----|------|---------|------------|------|
| コウモリ (Bat) | 10 | 150 | 5 | 0分〜 | 基本的な敵、大量出現 |
| スケルトン (Skeleton) | 30 | 80 | 8 | 0分〜 | 遅いが数が多い |
| ゾンビ (Zombie) | 60 | 60 | 12 | 5分〜 | 近づくと危険 |
| ゴースト (Ghost) | 25 | 100 | 10 | 10分〜 | 壁をすり抜け追跡 |
| デーモン (Demon) | 80 | 130 | 15 | 15分〜 | 高速で危険 |
| メデューサ (Medusa) | 50 | 70 | 20 | 20分〜 | 遠距離石化弾を発射 |
| ドラゴン (Dragon) | 150 | 90 | 25 | 25分〜 | 火球を吐く |
| ボスデス (Boss: Death) | 5000 | 30 | 50 | 30分〜 | 撃破で勝利、無敵フェーズあり |

### 6.2 敵スポーン設計
- 画面外の周囲からランダムスポーン
- 時間経過で出現数・HP・ダメージが段階的に増加（倍率: 1.0x → 最大3.0x）
- 複数の敵タイプが同時に出現可能（後半）

### 6.3 敵AIの基本ルール
- 基本AI: プレイヤーへ向かって直進
- メデューサ: 一定距離を保ちながら遠距離攻撃
- ドラゴン: 炎ブレス方向にプレイヤーを予測した射撃
- ボスデス: 複数フェーズ（詳細はゲームプレイシステム設計書参照）

---

## 7. レベルアップ・強化システム

### 7.1 経験値システム
- 敵を倒すと経験値ジェム（XPジェム）をドロップ
- XPジェムに一定距離まで近づくと自動吸収（磁石範囲）
- XPバーが満タンになるとレベルアップ
- 必要XPは指数曲線で増加（後半はレベルアップが稀になる）

### 7.2 XP必要量テーブル（概算）

| レベル | 必要XP | 累積XP |
|--------|--------|--------|
| 1→2 | 20 | 20 |
| 2→3 | 30 | 50 |
| 3→4 | 45 | 95 |
| 5→6 | 80 | 245 |
| 10→11 | 200 | 1095 |
| 20→21 | 500 | 5000 |

### 7.3 レベルアップ選択肢
レベルアップ時、以下の3択からランダムに提示される：
1. **新武器の取得**（最大6種まで所持可能）
2. **所持武器のレベルアップ**
3. **パッシブアイテムの取得/レベルアップ**

選択肢の生成ルール：
- 最大レベルに達した武器/パッシブは選択肢から除外
- 武器枠が満杯の場合、新武器は選択肢に出ない
- ラック値が高いほどレアなアイテム（高Lvアイテムなど）が出やすい

---

## 8. 宝箱システム

### 8.1 宝箱の出現条件
- 一定時間経過ごとにマップ上にランダムに出現（3分ごと）
- 特定の敵を一定数倒した際にも出現
- 出現した宝箱はマップ上に永続（消えない）

### 8.2 宝箱の内容
宝箱を開けると以下のいずれかが発動：
1. **武器/パッシブのランダム強化**: 所持中のアイテムから1つを無作為にレベルアップ
2. **武器進化**: 進化条件を満たした武器が進化（優先度最高）
3. **HP回復**: 最大HPの30%を回復
4. **ゴールド獲得**: 50〜200Gをランダムに獲得

---

## 9. メタ進行・アンロックシステム

### 9.1 ゴールドの獲得
- ゲーム中、敵を倒すと低確率でゴールドコインをドロップ
- 宝箱からもゴールドを獲得可能
- ゲームオーバー・勝利どちらの場合もゴールドを次回プレイに引き継ぎ

### 9.2 ゴールドショップ（メタ進行）

| アンロック内容 | 必要ゴールド | 効果 |
|-------------|-----------|------|
| マジシャン解放 | 500G | マジシャンでプレイ可能に |
| シーフ解放 | 700G | シーフでプレイ可能に |
| ナイト解放 | 1000G | ナイトでプレイ可能に |
| 開始ボーナスHP | 200G | 全キャラの初期HPが+10される |
| 開始ボーナス速度 | 300G | 全キャラの初期移動速度+5% |
| 追加選択肢 | 500G | レベルアップ時の選択肢が4択になる |
| XPボーナス | 400G | 全XP獲得量+10% |
| ゴールドボーナス | 600G | ゲーム中のゴールドドロップ率+20% |

### 9.3 実績システム（将来実装）
- 特定条件達成で実績解放
- 実績達成でスペシャルキャラクター解放など

---

## 10. ゲーム画面構成

### 10.1 タイトル画面
- ゲームタイトル（ロゴ）
- ゲームスタートボタン
- ゴールドショップボタン（メタ進行）
- 操作説明（オプション）

### 10.2 キャラクター選択画面
- 解放済みキャラクターの一覧表示
- 各キャラクターのステータス・初期武器・特徴表示
- 選択後ゲーム開始

### 10.3 ゲームプレイ画面
- メインゲームエリア（スクロールマップ）
- HUD（詳細はUI/UX設計書参照）

### 10.4 レベルアップ選択画面（ポーズオーバーレイ）
- ゲームを一時停止してカード形式で3択表示
- 各カードに武器/パッシブの詳細情報を表示

### 10.5 ゲームオーバー画面
- "GAME OVER" 表示
- 生存時間・撃破数・獲得ゴールド等の統計
- リトライ / タイトルに戻る

### 10.6 勝利画面
- "YOU WIN!" 表示
- クリアタイム・統計情報
- タイトルに戻る

---

## 11. 操作方法

### 11.1 基本操作
- **WASDキー** または **矢印キー**: プレイヤー移動（8方向）
- **ESCキー**: ポーズ / メニュー

### 11.2 特記事項
- 攻撃は完全自動（プレイヤー操作不要）
- 移動のみがプレイヤーの直接操作
- レベルアップ時はポーズ状態で選択画面が開く

---

## 12. アセット要件

### 12.1 グラフィック
- **プレイヤースプライト**: キャラクター別（4方向アニメーション）
  - 初期実装ではプレースホルダー（単色の円/矩形）を使用
  - 後日、自作ピクセルアートに置き換え
- **敵スプライト**: 7種 + ボス（シンプルな色分け円で代替可）
- **武器エフェクト**: 各武器の攻撃ビジュアル
- **XPジェム**: 緑色の小さなジェム
- **ゴールドコイン**: 黄色のコイン
- **背景**: タイル状の草/石畳マップ（シンプルな無限スクロール）
- **UIエレメント**: HPバー、XPバー、武器アイコン、カード

### 12.2 サウンド
（詳細はオーディオ設計書参照）
- BGM: タイトル・ゲームプレイ・ボス戦・ゲームオーバー・勝利
- SFX: 武器攻撃音・敵撃破音・レベルアップ音・宝箱開封音・ボス出現音

---

## 13. 技術要件

### 13.1 パフォーマンス
- **フレームレート**: 安定した60fps以上
- **エンティティ数**: 画面上に同時300〜500体の敵を想定
- **衝突判定**: 物理エンジンなし（手動円形衝突判定）で高速処理
- **メモリ**: 長時間プレイでメモリリークなし

### 13.2 互換性
- **プラットフォーム**: Windows, macOS, Linux（クロスプラットフォーム）
- **最小要件**: 2Dゲームが快適に動作するスペック

---

## 14. 成功基準

### 14.1 MVP成功基準
- [ ] プレイヤーが移動できる
- [ ] 敵が自動的に湧き出てプレイヤーに向かってくる
- [ ] 武器（ムチ）が自動攻撃する
- [ ] 敵を倒すとXPジェムが落ちる
- [ ] XPを吸収するとレベルアップする
- [ ] レベルアップ時に3択画面が表示される
- [ ] プレイヤーのHPが0でゲームオーバーになる
- [ ] 30分タイマーが機能する

### 14.2 フル機能版成功基準
- [ ] 8種類の武器がすべて実装されている
- [ ] 武器進化システムが機能する
- [ ] 8種類のパッシブアイテムが実装されている
- [ ] 7種類 + ボスの敵が実装されている
- [ ] 宝箱システムが機能する
- [ ] メタ進行（ゴールドショップ）が機能する
- [ ] BGMと効果音が統合されている
- [ ] 60fps以上で動作する（300体同時）

### 14.3 ポリッシュ版成功基準
- [ ] ピクセルアートアセットが統合されている
- [ ] エフェクト（パーティクル・ヒットストップ等）が充実している
- [ ] ゲームバランスが調整されている
- [ ] バグが修正されている
